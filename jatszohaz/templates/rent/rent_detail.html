{% extends "base.html" %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block content %}
    <h2>{% trans 'Rent' %}:</h2>

    {% trans 'Renter' %}: {{ object.renter.full_name2 }}<br/>
    {% trans 'Dates' %}: {{ object.date_from }} - {{ object.date_to }}<br/>
    {% trans 'Status' %}: {{ object.get_status_display }}<br/>
    {% trans 'Games' %}:
    {% if object.games.all %}
        <table class="table table-hover table-condensed">
        {% for game in object.games.all %}
            <tr>
                <td>{{ game.game_group }}</td>
                {% if perms.web.manage_rents %}
                    {# TODO move to rent_detail_admin ? #}
                    <td>{{ game.notes }}</td>
                    <td><a class="btn btn-info" href="{% url 'inventory:gamepiece' game.pk %}">{% trans 'Inventory' %}</a></td>
                    <td><a class="btn btn-danger" href="{% url 'rent:remove-game' object.pk game.pk %}">{% trans 'Delete' %}</a></td>
                {% endif %}
            </tr>
        {% endfor %}
        </table>
    {% else %}
        {% trans 'No games rented.' %}
    {% endif %}

    {% include 'rent/rent_detail_admin.html' %}

    <hr/>
    <h2>{% trans 'Comments' %}:</h2>
    {% for comment in object.comments.all %}
        {% trans 'User' %}: {{ comment.user }}<br/>
        {% trans 'Date' %}: {{ comment.created }}<br/>
        {% trans 'Message' %}: {{ comment.message }}<br/>
    {% endfor %}
    <h3>{% trans 'New comment' %}:</h3>
    <form action="{% url 'rent:new-comment' object.pk %}" method="post">
        {% csrf_token %}
        {{ comment_form|crispy }}
        <input type="submit" value="{% trans "Send" %}" class="btn btn-success" />
    </form>

{% endblock %}