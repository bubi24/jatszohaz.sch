{% extends "base.html" %}
{% load i18n %}

{% block content %}
    <h2>Rent:</h2>
    Renter: {{ object.renter.full_name2 }}<br/>
    Dates: {{ object.date_from }} - {{ object.date_to }}<br/>
    Games:
    <ul>
    {% for game in object.games.all %}
        <li>
            {{ game.game_group }} - {{ game.notes }}
            <a href="{% url 'rent:remove-game' object.pk game.pk %}">Delete</a>
        </li>
    {% endfor %}
    </ul>
    <form action="{% url 'rent:add-game' object.pk %}" method="post">
        {% csrf_token %}
        {{ add_game_form.as_p }}
        <input type="submit" value="{% trans "Add" %}" />
    </form>

    {% if available_statuses %}
        <h3>New status:</h3>
            {% for status in available_statuses %}
                <a href="{% url 'rent:change-status' object.pk status.0 %}">{{ status.1 }}</a><br/>
            {% endfor %}
        <h3>Other details</h3>
    {% endif %}

    Bail: {{ object.bail }}<br/>
    Status: {{ object.get_status_display }}
    <h3>Edit rent:</h3>
    <form action="{% url 'rent:edit' object.pk %}" method="post">
        {% csrf_token %}
        {{ rent_form.as_p }}
        <input type="submit" value="{% trans "Save" %}" />
    </form>

    <h3>History</h3>
    {% for a in object.histories.all %}
        {{ a.created }} {{ a.user.full_name2 }} -> {{ a.new_status }}<br/>
    {% endfor %}

    <hr/>
    <h2>Comments:</h2>
    {% for comment in object.comments.all %}
        User: {{ comment.user }}<br/>
        Date: {{ comment.created }}<br/>
        Message: {{ comment.message }}<br/>
    {% endfor %}
    <h3>New comment:</h3>
    <form action="{% url 'rent:new-comment' object.pk %}" method="post">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <input type="submit" value="{% trans "Send" %}" />
    </form>

{% endblock %}